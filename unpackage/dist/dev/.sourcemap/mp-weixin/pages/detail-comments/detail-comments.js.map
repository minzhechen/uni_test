{"version":3,"sources":["uni-app:///main.js","webpack:////Users/apple/Desktop/uni_test/pages/detail-comments/detail-comments.vue?042c","webpack:////Users/apple/Desktop/uni_test/pages/detail-comments/detail-comments.vue?6357","webpack:////Users/apple/Desktop/uni_test/pages/detail-comments/detail-comments.vue?3843","webpack:////Users/apple/Desktop/uni_test/pages/detail-comments/detail-comments.vue?b9f0","uni-app:///pages/detail-comments/detail-comments.vue","webpack:////Users/apple/Desktop/uni_test/pages/detail-comments/detail-comments.vue?d503","webpack:////Users/apple/Desktop/uni_test/pages/detail-comments/detail-comments.vue?9be3"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,yH;AACAA,UAAU,CAACC,uBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4H;AAC5H;AACmE;AACL;AACc;;;AAG5E;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,qFAAM;AACR,EAAE,0FAAM;AACR,EAAE,mGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,8FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,sQAEN;AACL,GAAG;AACH;AACA,WAAW,sNAEN;AACL,GAAG;AACH;AACA,WAAW,sNAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxBA;AAAA;AAAA;AAAA;AAA8zB,CAAgB,6yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;ACal1B;AACA,MADA,kBACA;AACA;AACA;AACA,sBAFA;AAGA;AACA,oBAJA;AAKA,aALA;AAMA,iBANA;AAOA,wBAPA;AAQA;AACA,uBATA;;AAWA,GAbA;AAcA,QAdA,kBAcA,KAdA,EAcA;AACA;AACA;AACA;AACA,GAlBA;AAmBA;AACA,eApBA,2BAoBA;AACA;AACA;AACA;AACA;AACA,GAzBA;AA0BA;AACA;AACA,eAFA,uBAEA,UAFA,EAEA;AACA;AACA,kBADA,CACA;AACA,8BADA;AAEA,uBAFA;AAGA,+BAHA,EADA;;AAMA,UANA,CAMA;AACA,YADA,GACA,GADA,CACA,IADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAfA;AAgBA,KAnBA;;AAqBA;AACA,SAtBA,iBAsBA,CAtBA,EAsBA;AACA;AACA;AACA,yCADA;AAEA,4BAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,KAlCA;;AAoCA;AACA,eArCA,yBAqCA;AACA;AACA,KAvCA;;AAyCA;AACA,SA1CA,mBA0CA;AACA;AACA;AACA,KA7CA;;AA+CA;AACA,UAhDA,kBAgDA,aAhDA,EAgDA;AACA;AACA;AACA,KAnDA;;AAqDA;AACA,oBAtDA,4BAsDA,OAtDA,EAsDA;AACA;AACA;AACA,mCADA;AAEA,aAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,yBADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAhBA;AAiBA,KA/EA,EA1BA,E;;;;;;;;;;;;;ACbA;AAAA;AAAA;AAAA;AAA2+C,CAAgB,u4CAAG,EAAC,C;;;;;;;;;;;ACA//C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/detail-comments/detail-comments.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/detail-comments/detail-comments.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./detail-comments.vue?vue&type=template&id=58da0430&\"\nvar renderjs\nimport script from \"./detail-comments.vue?vue&type=script&lang=js&\"\nexport * from \"./detail-comments.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail-comments.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/detail-comments/detail-comments.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail-comments.vue?vue&type=template&id=58da0430&\"","var components = {\n  commentsBox: function() {\n    return import(\n      /* webpackChunkName: \"components/comments-box/comments-box\" */ \"@/components/comments-box/comments-box.vue\"\n    )\n  },\n  uniLoadMore: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-load-more/uni-load-more\" */ \"@/components/uni-load-more/uni-load-more.vue\"\n    )\n  },\n  commentPopup: function() {\n    return import(\n      /* webpackChunkName: \"components/comment-popup/comment-popup\" */ \"@/components/comment-popup/comment-popup.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail-comments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail-comments.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<!-- 评论列表渲染 -->\r\n\t\t<view class=\"comment-content\" v-for=\"(v, i) in commentsList\" :key=\"v.author.comment_id\"><comments-box :comments=\"v\" @reply=\"reply\"></comments-box></view>\r\n\t\t<!-- 如果数据大于0或者小于4的时候就不显示 -->\r\n\t\t<uni-load-more v-if=\"commentsList.length === 0 || commentsList.length > 5\" iconType=\"snow\" :status=\"loading\"></uni-load-more>\r\n\r\n\t\t<!-- 评论弹窗组件 -->\r\n\t\t<comment-popup ref=\"popup\" @submit=\"submit\"></comment-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t// 评论内容列表\r\n\t\t\tcommentsList: [],\r\n\t\t\t// 文章id\r\n\t\t\tarticle_id: '',\r\n\t\t\tpage: 1,\r\n\t\t\tpageSize: 5,\r\n\t\t\tloading: 'loading',\r\n\t\t\t// 被回复的评论的信息\r\n\t\t\treplyFormData: {}\r\n\t\t};\r\n\t},\r\n\tonLoad(query) {\r\n\t\tthis.article_id = query.id;\r\n\t\t// 获取评论内容\r\n\t\tthis.getComments(query.id);\r\n\t},\r\n\t// 滚动到底部的事件\r\n\tonReachBottom() {\r\n\t\tif (this.loading !== 'noMore') {\r\n\t\t\tthis.page++;\r\n\t\t\tthis.getComments(this.article_id);\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t// 获取评论内容\r\n\t\tgetComments(article_id) {\r\n\t\t\tthis.$api\r\n\t\t\t\t.get_comments({\r\n\t\t\t\t\tarticle_id,\r\n\t\t\t\t\tpage: this.page,\r\n\t\t\t\t\tpageSize: this.pageSize\r\n\t\t\t\t})\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tlet { data } = res;\r\n\t\t\t\t\tif (data.length === 0) {\r\n\t\t\t\t\t\tthis.loading = 'noMore';\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet arr = JSON.parse(JSON.stringify(this.commentsList));\r\n\t\t\t\t\tarr.push(...data);\r\n\t\t\t\t\tthis.commentsList = arr;\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 回复按钮事件\r\n\t\treply(e) {\r\n\t\t\tconsole.log(e);\r\n\t\t\tthis.replyFormData = {\r\n\t\t\t\tcomment_id: e.comments.comment_id,\r\n\t\t\t\tis_reply: e.is_reply\r\n\t\t\t};\r\n\t\t\t// 回复 评论的对象的id\r\n\t\t\tif (e.comments.reply_id) {\r\n\t\t\t\tthis.replyFormData.reply_id = e.comments.reply_id;\r\n\t\t\t}\r\n\t\t\t// 打开评论发布窗口\r\n\t\t\tthis.openComment();\r\n\t\t},\r\n\r\n\t\t// 打开评论发布窗口\r\n\t\topenComment() {\r\n\t\t\tthis.$refs.popup.open();\r\n\t\t},\r\n\r\n\t\t// 关闭弹窗清空数据\r\n\t\tclose() {\r\n\t\t\tthis.$refs.popup.close();\r\n\t\t\tthis.$refs.popup.celar();\r\n\t\t},\r\n\r\n\t\t// 点击发布按钮\r\n\t\tsubmit(commentsValue) {\r\n\t\t\t// 发布评论\r\n\t\t\tthis.setUpdateComment({ content: commentsValue, ...this.replyFormData });\r\n\t\t},\r\n\r\n\t\t// 发布评论\r\n\t\tsetUpdateComment(content) {\r\n\t\t\tuni.showLoading();\r\n\t\t\tconst formData = {\r\n\t\t\t\tarticle_id: this.article_id,\r\n\t\t\t\t...content\r\n\t\t\t};\r\n\t\t\t// console.log(formData);\r\n\t\t\t// return\r\n\t\t\tthis.$api.update_comment(formData).then(res => {\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '评论发布成功'\r\n\t\t\t\t});\r\n\t\t\t\t// 初始化数据\n\t\t\t\tthis.commentsList = []\r\n\t\t\t\tthis.page = 1;\r\n\t\t\t\tthis.loading = 'loading';\r\n\t\t\t\t// 获取评论内容\r\n\t\t\t\tthis.getComments(this.article_id);\n\t\t\t\tuni.$emit('update_article')\r\n\t\t\t\tthis.close();\r\n\t\t\t\t// 清空被回复的评论的信息\r\n\t\t\t\tthis.replyFormData = {};\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.comment-content {\r\n\tborder-top: 1px solid #eee;\r\n\tpadding: 0 15px;\r\n}\r\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail-comments.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail-comments.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1602234311294\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}